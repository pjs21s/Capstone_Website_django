{% extends "posts/post_base.html" %}
{% load social_share %}
{% block post_content %}
    <div class="container">  <!--타이틀 -->
        <h3 class="display-4">{{post.title|safe}}</h3>
        <div class="media-footer d-flex flex-row-reverse">
            <i class="far fa-eye"> {{ hitcount.total_hits }}</i> <!-- 조회수 아이콘 -->
            <small class="text-muted align-middle">{{ post.created_at }}</small>
            {% if user.is_authenticated and post.user == user and not hide_delete %}
                <a href="{% url 'posts:delete' pk=post.pk %}" title="delete">
                    <button type="button" class="btn btn-outline-danger btn-sm">삭제</button>
                </a>
                <a href="{% url 'posts:update' pk=post.pk%}" title="update">
                    <button type="button" class="btn btn-outline-warning btn-sm">수정</button>
                </a>
            {% endif %}
        </div>
    </div>
    <div class="jumbotron"> <!-- 본문 -->
        {{post.text|safe}} 
        <div class="btn-group btn-group-sm" style="margin-bottom:-4em"> <!-- (좋아요, 공유 버튼 등) -->
            <button type="button" class="btn btn-link btn-outline-info">
                <a href="{% url 'posts:post_like' pk=post.pk %}"><i class="far fa-heart"></i>
                </a> {{ post.like_count }}개</button> <!--좋아요 아이콘 -->
            <button type="button" class="btn btn-link btn-outline-info">{% post_to_facebook post.get_absolute_url "Facebook" %}</button>
            <button type="button" class="btn btn-link btn-outline-info">{% post_to_twitter post.title post.get_absolute_url "Twitter" %}</button>
            <button type="button" class="btn btn-link btn-outline-info"><i class="fas fa-bug"></i></button> <!--신고 아이콘 -->
            <button type="button" class="btn btn-link btn-outline-info"><i class="fas fa-bookmark"></i></button> <!--북마크 아이콘 -->
        </div>
    </div>
    <h3 class="display-5">댓글( {{post.comments.count}} )</h3>
    {% if user.is_authenticated %}
    <form action="{% url 'posts:comment_write' pk=post.pk %}" method="POST">
        {% csrf_token %}
        <div class="md-form">
        <textarea class="md-textarea form-control" name="comment_text" rows="2"></textarea>
        <input type="submit" class="btn btn-outline-primary" value="작성">
        </div>
    </form>
    
    {% endif %}
    {% for comment in post.comments.all %}
    <div class="container">
        <div class="card shadow-sm p-3 mb-5 bg-white rounded">
            <div class="card-body">
                작성자 {{comment.comment_writer}}
                <p class="font-weight-light">{{comment.comment_date}}</p>
                <p class="text-monospace">{{comment.comment_text}}</p>
                {% if user.is_authenticated and comment.comment_writer == user %}
                <a class="btn btn-primary btn-sm" href="{% url 'posts:comment_remove' pk=comment.pk %}">
                    <i class="fas fa-trash-alt"></i></a> <!--삭제 아이콘 -->
                {% endif %}
            </div>
        </div> 
    </div>
      
    {% empty %}
        <div class="bg-light" style="width:17rem";>글이 좋으셨다면 댓글을 남겨주세요 :)</div>
    {% endfor %}
{% endblock %}

